{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nlet page = 1;\n\nconst loader = document.querySelector('.loader');\nconst loaderWrapper = document.querySelector('.loader-wrapper');\n\nexport async function searchRequest(searchQuery) {\n  const searchParams = new URLSearchParams({\n    key: '45176737-eefebace9d6de0f5929b63080',\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: 1,\n    per_page: 15,\n  });\n\n  const url = `https://pixabay.com/api/?${searchParams}`;\n\n  loader.style.display = 'inline-block';\n  document.querySelector('.gallery').style.display = 'none';\n  document.querySelector('.load-more').style.display = 'none';\n\n  try {\n    const response = await axios.get(url);\n    const data = response.data;\n    return data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.style.display = 'none';\n    document.querySelector('.gallery').style.display = 'flex';\n    page = 2;\n  }\n}\n\nexport async function loadMoreImages(searchQuery) {\n  const searchParams = new URLSearchParams({\n    key: '45176737-eefebace9d6de0f5929b63080',\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    page: page,\n    per_page: 15,\n  });\n\n  const url = `https://pixabay.com/api/?${searchParams}`;\n\n  loader.style.display = 'inline-block';\n\n  if (loader && loaderWrapper) {\n    loader.style.display = 'inline-block';\n    loaderWrapper.classList.add('bottom');\n  }\n\n  document.querySelector('.load-more').style.display = 'none';\n\n  try {\n    const response = await axios.get(url);\n    const data = response.data;\n    return data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    if (loader && loaderWrapper) {\n      loader.style.display = 'none';\n      loaderWrapper.classList.remove('bottom');\n    }\n    document.querySelector('.load-more').style.display = 'block';\n    page += 1;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderGallery(imgArray) {\n  const gallery = document.querySelector('.gallery');\n\n  const imageItems = imgArray\n    .map(image => {\n      return `<li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n              <img\n                  class=\"gallery-image\"\n                  src=\"${image.previewURL}\"\n                  data-source=\"${image.largeImageURL}\"\n                  alt=\"${image.tags}\"\n              />\n              <div class=\"image-details\">\n            <div class=\"details-element\">\n              <p class=\"details-title\">Likes</p>\n              <p class=\"details-value\">${image.likes}</p>\n            </div>\n            <div class=\"details-element\">\n              <p class=\"details-title\">Views</p>\n              <p class=\"details-value\">${image.views}</p>\n            </div>\n            <div class=\"details-element\">\n              <p class=\"details-title\">Comments</p>\n              <p class=\"details-value\">${image.comments}</p>\n            </div>\n            <div class=\"details-element\">\n              <p class=\"details-title\">Downloads</p>\n              <p class=\"details-value\">${image.downloads}</p>\n            </div>\n          </div>\n              </a>\n              </li>`;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', imageItems);\n\n  lightbox.refresh();\n}\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlightbox.on('show.simplelightbox');\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { searchRequest, loadMoreImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet searchData = '';\nlet imgCount = 0;\nlet totalImages = 0;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  searchData = document.querySelector('.search-input').value.trim();\n\n  if (searchData === '') {\n    iziToast.error({\n      id: 'error',\n      message: 'The search field cannot be empty',\n      position: 'topRight',\n      transitionIn: 'fadeInDown',\n    });\n    gallery.innerHTML = '';\n  } else {\n    try {\n      const data = await searchRequest(searchData);\n      console.log(data);\n\n      if (data.hits.length === 0) {\n        iziToast.error({\n          id: 'error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          transitionIn: 'fadeInDown',\n        });\n        gallery.innerHTML = '';\n      } else {\n        gallery.innerHTML = '';\n        renderGallery(data.hits);\n        loadMoreButton.style.display = 'block';\n        totalImages = data.totalHits;\n        imgCount = data.hits.length;\n      }\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  }\n});\n\nloadMoreButton.addEventListener('click', async event => {\n  event.preventDefault();\n\n  if (imgCount >= totalImages) {\n    iziToast.error({\n      id: 'error',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n      transitionIn: 'fadeInDown',\n    });\n    loadMoreButton.style.display = 'none';\n  } else {\n    try {\n      const data = await loadMoreImages(searchData);\n      renderGallery(data.hits);\n      imgCount += data.hits.length;\n\n      const galleryItem = document.querySelector('.gallery-item');\n      const rect = galleryItem.getBoundingClientRect();\n      window.scrollBy({\n        top: 2 * rect.height + 24,\n        left: 0,\n        behavior: 'smooth',\n      });\n    } catch (error) {\n      console.error('Error:', error);\n    }\n  }\n});\n"],"names":["page","loader","loaderWrapper","searchRequest","searchQuery","url","axios","error","loadMoreImages","renderGallery","imgArray","gallery","imageItems","image","lightbox","SimpleLightbox","form","loadMoreButton","searchData","imgCount","totalImages","event","iziToast","data","rect"],"mappings":"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"}